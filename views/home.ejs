<%- include('./partials/header.ejs') %>
<%- include('./partials/usernav.ejs') %>


    <!-- Content -->
    <div class="page-content">
		<!-- Section Banner -->
		<div class="dez-bnr-inr dez-bnr-inr-md" style="background-image:url(images/main-slider/slide2.jpg);">
            <div class="container">
                <div class="dez-bnr-inr-entry align-m ">
					<div class="find-job-bx">
						<p class="site-button button-sm">Find Jobs, Employment & Career Opportunities</p>
						<h2>Search Between More Than <br/> <span class="text-primary">5000</span> Open Jobs.</h2>
						<form autocomplete="off" action="/user/submitSearch" method="POST" class="dezPlaceAni">
							<div class="row" onclick="location.href='/user/alljobs'">
								<div class="col-lg-5 col-md-6">
									<div class="form-group">
										<div class="input-group">
											<input type="text" list="domains" class="form-control" name="header" id="domainInput" onkeyup="displayDomain()" placeholder="Job Title, Keywords, or Phrase">
											<datalist id="domains">
												
											  </datalist>
											<div class="input-group-append">
											  <span class="input-group-text"><i class="fa fa-search"></i></span>
											</div>
										</div>
									</div>
								</div>
								
								<div class="col-lg-5 col-md-6">
									<div class="form-group">
										<div class="input-group">
											<input type="text" list="location" name="location" class="form-control" onkeyup="displayLocation()" placeholder="City, Location">
											<datalist id="location">
												
											</datalist>
											<div class="input-group-append">
											  <span class="input-group-text"><i class="fa fa-map-marker"></i></span>
											</div>
										</div>
									</div>
								</div>
								
								<div class="col-lg-2 col-md-6">
									<button type="submit" class="site-button btn-block">Find Job</button>
								</div>
							</div>
						</form>
					</div>
				</div>
            </div>
        </div>
		<!-- Section Banner END -->

		<!-- About Us -->
		<div id="companies" class="section-full job-categories  bg-white" style="background-image:url(../images/pattern/pic1.html); padding-top: 80px; padding-bottom: 30px;">
			<div class="container">
				<div class="section-head d-flex head-counter clearfix">
					<div class="mr-auto">
						<h2 class=""></h2>
						<!-- <h6 class="fw3">20+ Catetories work wating for you</h6> -->
					</div>
					<div class="head-counter-bx">
						<% if(jobCount) { %>
							<h2 class=" counter"><%= jobCount.jobCount %></h2>
						<% } %>

						<h6 class="fw3">Jobs Posted</h6>
					</div>
					<div class="head-counter-bx">
						<% if(jobCount) { %>
							<h2 class=" counter"><%= jobCount.jobCount %></h2>
						<% } %>
						<h6 class="fw3">Total Applications</h6>
					</div>
					<div class="head-counter-bx">
						<% if(jobCount) { %>
						<h2 class=" counter"><%= empCount.empCount %></h2>
						<% } %>

						<h6 class="fw3">Employers</h6>
					</div>
				</div>
				<!-- <div class="row sp20">
					<% employers.forEach(function(employers) { %>
					<div class="col-lg-3 col-md-6 col-sm-6">
						<div class="icon-bx-wraper">
							<div class="icon-content">
								<div class="icon-md text-primary m-b20"><i class="ti-location-pin"></i></div>
								<a href="#" class="dez-tilte"><%= employers.username %></a>
								<p class="m-a0">198 Open Positions</p>
								<div class="rotate-icon"><i class="ti-location-pin"></i></div> 
							</div>
						</div>
					</div>
					<% }) %>
					<div class="col-lg-12 text-center m-t30">
						<button class="site-button radius-xl">All Companies</button>
					</div>
				</div> -->
			</div>
		</div>
	

		<!-- Call To Action END -->
		<!-- Our Job -->
		<div class="section-full bg-gray content-inner-2">
			<div class="container">
				<div class="d-flex job-title-bx section-head">
					<div class="mr-auto">
						<h2 class="m-b5">Recent Jobs</h2>
						<h6 class="fw4 m-b0">20+ Recently Added Jobs</h5>
					</div>
					<div class="align-self-end">
						<a href="/user/alljobs" class="site-button button-sm">Browse All Jobs <i class="fa fa-long-arrow-right"></i></a>
					</div>
				</div>
				<div class="row">
					<div class="col-lg-9">
						<ul class="post-job-bx">
							<% if(jobs) {%>
							<% jobs.forEach(function(jobs) { %>
										<li>

											<a href="/user/jobdetails/<%= jobs._id %>">
												<div class="d-flex m-b30" >
													<div class="job-post-company">
														<span><img src="/images/brandLogo/<%= jobs._id %>.png" /></span>
													</div>
													<div class="job-post-info">
														<h4 class="job-time"><%= jobs.header %></h4>
														<div class="d-flex">
															<div class="job-time mr-auto">
																<span><%= jobs.companyName %></span>
															</div>
														</div>
														<ul>
															<li><i class="fa fa-map-marker"></i><%= jobs.location %></li>
															<!-- <li><i class="fa fa-bookmark-o"></i> Full Time</li> -->
															<li><i class="fa fa-briefcase"></i><%= jobs.minExp %>-<%= jobs.maxExp %> yrs</li>
															<li><i class="fa fa-clock-o"></i> Published 11 months ago</li>
														</ul>
														<ul>
															<li><%= jobs.skills %></li>
															<!-- <li><i class="fa fa-clock-o"></i> Published 11 months ago</li> -->
														</ul>
													</div>
												</div>
												<div class="d-flex">
													<div class="job-time mr-auto">
														<span><%= jobs.workTime %></span>
													</div>
													<div class="salary-bx">
														<span>₹<%= jobs.minimumSalary %> - ₹<%= jobs.maximumSalary %></span>
													</div>
												</div>
											</a>
										</li>
										
									
							<% }) %>
						<% } %>
					</ul>
						
					</div>
					<div class="col-lg-3">
						<div class="sticky-top">
							<div class="candidates-are-sys m-b30">
								<div class="candidates-bx">
									<div class="testimonial-pic radius"><img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTI_xOk9ShQP87jx25MByABMrLUanH1Mu2nWaZbCkDCod-U7Em0dUG0Aw98JEQuJjoZTz8bj7CZ_UGJTi93ZQfwhtySwnroG7I&usqp=CAU&ec=45725303" alt="" width="100" height="100"></div>
									<div class="testimonial-text">
										<p>The moment you have an instinct to act on a goal you must physically move within 5 seconds or your brain will stop you.</p>
									</div>
									<div class="testimonial-detail"> <strong class="testimonial-name">Mel Robbins</strong> <span class="testimonial-position">Nevada, USA</span> </div>
								</div>
							</div>
							<div class="quote-bx">
								<div class="quote-info">
									<h4>Make a Change In Your Career!</h4>
									<p><span style="font-weight: bolder; font-size: 3rem;">SPS</span> offers hands on industry relevant technical skill training for more than 12 domains in the field of Information Technology.</p>
									<a href="https://spsonline.in/" class="site-button">Link to Site</a>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

	</div>
        
	
<%- include('./partials/userfooter.ejs') %>

    <!-- scroll top button -->
    <button class="scroltop fa fa-arrow-up" ></button>
</div>


<%- include('./partials/footer.ejs') %>



<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script>
	let domainHeader = [];
	async function displayDomain() {
		let input = document.getElementById('domainInput').value;
		input = input.toLowerCase().replace(/\s/g, "")
		console.log(input);
		await axios.get('/user/searchdomain', {input})
			.then(async (res) => {
				let indexes = [];
				let x = res.data
				for (let i = 0; i < x.length; i++) {
					if(x[i].includes(input)) {
						indexes = [...indexes, i]						
					}
				} 
				if(indexes.length > 0) {
					await axios.post('/user/postDomainIndexes', indexes)
						.then(response => {
							domainHeader = response.data
							var datalist, i;
							let option = '';
				
							datalist = document.getElementById('domains');
							for ( i = 0; i < domainHeader.length; i ++ ) {
								option += '<option value="' + domainHeader[i] + '" />';

							}
							document.getElementById('domains').innerHTML = option;
						})
				}
			})
				

	}

	function displayLocation () {
		axios.get('/user/getLocations')
			.then((res) => {
				let locations = res.data;
				var datalist, i;
				let option = '';
	
				datalist = document.getElementById('location');
				for ( i = 0; i < locations.length; i ++ ) {
					option += '<option value="' + locations[i] + '" />';

				}
				document.getElementById('location').innerHTML = option;
			})
	}

	
</script>

